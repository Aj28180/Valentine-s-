<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bhumika ‚ù§Ô∏è Ankush - Eternal Love</title>
<style>
body {
  margin: 0;
  font-family: 'Georgia', serif;
  background: radial-gradient(circle at 20% 20%, #2b0000, #1a0000 40%, #000);
  color: white;
  overflow: hidden;
  height: 100vh;
  text-align: center;
  position: relative;
}

.hearts-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
.rose-petals { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 3; }
.heart {
  position: absolute; width: 24px; height: 22px; animation: float 8s infinite linear;
}
.heart:before, .heart:after {
  content: ''; position: absolute; width: 12px; height: 12px; background: #ff1744;
  border-radius: 50px 50px 0 0; transform: rotate(-45deg); left: 6px;
}
.heart:after { transform: rotate(45deg); top: 6px; }
@keyframes float {
  0% { transform: translateY(100vh) rotate(0deg) scale(0.8); opacity: 0.8; }
  50% { opacity: 1; }
  100% { transform: translateY(-120px) rotate(720deg) scale(1.2); opacity: 0; }
}

.rose-petal {
  position: absolute;
  width: 22px;
  height: 18px;
  background: radial-gradient(ellipse at center, #ffb6c1 0%, #ff69b4 35%, #ff1493 65%, #c71585 100%);
  border-radius: 60% 0 60% 50%;
  opacity: 0.88;
  box-shadow: 
    0 3px 12px rgba(255, 105, 180, 0.5),
    inset 0 1px 3px rgba(255, 255, 255, 0.3);
  animation: fallRoseDreamy linear infinite;
}
.rose-petal::before {
  content: '';
  position: absolute;
  width: 11px;
  height: 9px;
  background: inherit;
  border-radius: 55% 0 55% 45%;
  top: -4px;
  left: 5.5px;
  transform: rotate(18deg);
  box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.4);
}
.rose-petal::after {
  content: '';
  position: absolute;
  width: 14px;
  height: 12px;
  background: radial-gradient(ellipse at center, #ffc0cb 0%, #ff69b4 70%);
  border-radius: 45% 0 45% 40%;
  top: 1.5px;
  left: 3.5px;
  transform: rotate(-12deg);
}
@keyframes fallRoseDreamy {
  0% { transform: translateY(-60px) rotate(0deg) scale(0.6); opacity: 0; }
  8% { opacity: 0.92; }
  92% { opacity: 0.92; }
  100% { transform: translateY(130vh) rotate(1080deg) scale(1.15); opacity: 0; }
}

.title-glow {
  font-size: clamp(32px, 6vw, 55px); 
  line-height: 1.2;
  color: #ff69b4;
  text-shadow: 0 0 20px rgba(255, 105, 180, 0.8), 2px 2px 8px rgba(0,0,0,0.7);
  font-weight: 700;
}

.center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; width: 90%; }
.hidden { display: none; }

button {
  padding: 12px 28px; font-size: 18px; font-weight: bold;
  border: none; border-radius: 30px; margin: 8px; cursor: pointer;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  box-shadow: 0 6px 20px rgba(255, 23, 68, 0.4);
  display: inline-block;
}
button:hover {
  transform: translateY(-2px) scale(1.05); box-shadow: 0 12px 30px rgba(255, 23, 68, 0.7);
}
#startBtn, #yesBtn { 
  background: linear-gradient(135deg, #4CAF50, #45a049, #66BB6A); color: white; 
  box-shadow: 0 0 25px rgba(76, 175, 80, 0.6);
}
#noBtn { 
  background: linear-gradient(135deg, #f44336, #d32f2f, #ef5350); color: white; 
  box-shadow: 0 0 25px rgba(244, 67, 54, 0.6);
}

.loveMsg {
  max-width: 700px; margin: 25px auto; font-size: clamp(17px, 2.8vw, 22px);
  line-height: 1.8; color: #ffd1dc; animation: fadeInUp 1.2s ease-out;
  font-weight: 600;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(40px); }
  to { opacity: 1; transform: translateY(0); }
}

canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 5; }

/* TYPING MESSAGE CONTAINERS */
.typing-container {
  margin: 25px 0;
  min-height: 40px;
}
.typing-text { 
  display: inline-block; 
  color: #ffd1dc;
  font-weight: 500;
  line-height: 1.6;
}
#thanksTyping {
  font-size: clamp(20px, 4vw, 28px);
  color: #ffdbac;
  font-weight: 600;
  text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
}
#loveTyping {
  font-size: clamp(28px, 5vw, 40px);
  color: #ff69b4;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
  margin: 20px 0;
}
#letterTyping {
  font-size: clamp(18px, 3vw, 24px);
  max-width: 600px;
  margin: 0 auto 30px;
}
.feather-cursor {
  display: inline-block;
  width: 25px;
  height: 25px;
  background: url('image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff69b4"><path d="M20.71 5.62l-2.34-2.34a1 1 0 0 0-1.41 0l-3.38 3.38-1.35-1.35a1 1 0 0 0-1.41 0L11 8.59l2.12 2.13a1 1 0 0 0 1.41 0L17.41 8l1.83 1.83a1 1 0 0 0 1.41 0l1.86-1.86a1 1 0 0 0-.01-1.41zM5 17.5l1.41-1.41L10 20.41l-2.88 2.89a1 1 0 0 1-1.41 0L3 21.41a1 1 0 0 1 0-1.41L5 17.5zm14.46-8.46L21 9.41l-4.46 4.46-2.12-2.12 4.46-4.46 1.58 1.58z"/></svg>') center/contain no-repeat;
  animation: writeFeather 0.3s ease-in-out infinite alternate;
  margin-left: -8px;
}
@keyframes writeFeather {
  0% { transform: translateY(0) rotate(-5deg); }
  100% { transform: translateY(-2px) rotate(3deg); }
}
</style>
</head>

<body>
<audio id="loveSong" loop preload="auto" autoplay style="display:none;">
  <source src="zara_si.mp3" type="audio/mpeg">
</audio>

<div id="heartsBg" class="hearts-bg"></div>
<div id="rosePetals" class="rose-petals"></div>

<!-- üîê PASSWORD -->
<div id="lock" class="center">
  <h2 style="font-size: clamp(24px, 5vw, 32px);">Enter Our Secret Password üîê</h2>
  <input type="password" id="pass" style="padding: 15px; font-size: 20px; border-radius: 30px; border: 2px solid #ff4d6d; margin: 15px; width: clamp(280px, 40vw, 350px); background: rgba(255,255,255,0.1); color: white; backdrop-filter: blur(10px);" placeholder="Our special words...">
  <br><br><button onclick="unlock()">Unlock Eternal Love ‚ù§Ô∏è</button>
  <p id="error" style="color: #ff6b9d; font-size: 18px;"></p>
</div>

<!-- ‚ù§Ô∏è START -->
<div id="startScreen" class="center hidden">
  <div class="title-glow">Bhumika ‚ù§Ô∏è Ankush</div>
  <p style="font-size: clamp(18px, 3vw, 24px); margin: 20px 0; opacity: 0.9;">Forever begins here...</p>
  <button id="startBtn">‚ú® Begin Our Love Story ‚ú®</button>
</div>

<!-- üíå MAIN -->
<div id="content" class="center hidden">
  <h1 class="title-glow">Bhumika, You Are My Universe üíñ</h1>
  <p class="loveMsg">
    My Dearest Bhumika,<br><br>
    Every moment with you feels like a dream I never want to wake from ‚ú®.<br>
    Your laughter heals me, your touch grounds me, your love completes me üíï.<br>
    From stolen glances to forever promises‚Äîyou are my always.<br><br>
    Will you be my Valentine... my eternal love... my eternity? üíç
  </p>
  <div style="display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
    <button id="yesBtn">Yes, Forever & Always! üíã</button>
    <button id="noBtn">Maybe Later üòò</button>
  </div>
</div>

<!-- üíñ FINAL - REORDERED MESSAGES WITH TYPING -->
<div id="final" class="center hidden">
  <!-- 1st: Thank You Message (TOP) -->
  <div class="typing-container">
    <span class="typing-text" id="thanksTyping"></span><span class="feather-cursor" id="cursor1"></span>
  </div>
  
  <!-- 2nd: Love Letter (MIDDLE) -->
  <div class="typing-container">
    <span class="typing-text" id="letterTyping"></span><span class="feather-cursor" id="cursor2"></span>
  </div>
  
  <!-- 3rd: I Love You Babe (BOTTOM - LAST) -->
  <div class="typing-container">
    <span class="typing-text" id="loveTyping"></span><span class="feather-cursor" id="cursor3"></span>
  </div>
</div>

<canvas id="fireworks"></canvas>

<script>
// MUSIC SETUP
const audio = document.getElementById('loveSong');
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
const analyser = audioContext.createAnalyser();
const source = audioContext.createMediaElementSource(audio);
source.connect(analyser);
analyser.connect(audioContext.destination);
analyser.fftSize = 256;
const bufferLength = analyser.frequencyBinCount;
const dataArray = new Uint8Array(bufferLength);

// üåπ ROSE PETALS
let rosePetalsActive = false;
function createRosePetals() {
  rosePetalsActive = true;
  const roseContainer = document.getElementById('rosePetals');
  
  function spawnPetal() {
    if (!rosePetalsActive) return;
    const petal = document.createElement('div');
    petal.className = 'rose-petal';
    const size = 0.75 + Math.random() * 0.5;
    petal.style.width = (22 * size) + 'px';
    petal.style.height = (18 * size) + 'px';
    petal.style.left = Math.random() * 100 + '%';
    const duration = 15 + Math.random() * 10;
    petal.style.animationDuration = duration + 's';
    petal.style.animationDelay = Math.random() * 1.5 + 's';
    roseContainer.appendChild(petal);
    setTimeout(() => { if (petal.parentNode) petal.remove(); }, (duration + 2) * 1000);
  }
  setInterval(spawnPetal, 150);
  spawnPetal();
}

// ü™∂ UNIVERSAL TYPING FUNCTION
function typeWriter(element, text, speed = 80, callback) {
  let i = 0;
  element.innerHTML = '';
  
  function type() {
    if (i < text.length) {
      element.innerHTML += text.charAt(i);
      i++;
      setTimeout(type, speed);
    } else {
      // Hide cursor after typing
      const cursor = element.nextElementSibling;
      if (cursor) cursor.style.display = 'none';
      
      // Continue sequence
      if (callback) callback();
    }
  }
  type();
}

// 3D HEARTS
let heartsRainActive = false;
function create3DHeartsSlowBlast() {
  heartsRainActive = true;
  const heartsBg = document.getElementById('heartsBg');
  function blastHearts() {
    for(let i = 0; i < 8; i++) {
      const heart = document.createElement('div');
      heart.innerHTML = 'üíñ';
      const angle = (i / 8) * Math.PI * 2;
      heart.style.cssText = `
        position: absolute;
        font-size: ${25 + Math.random() * 15}px;
        color: #ff1744;
        left: 50vw;
        top: 30vh;
        text-shadow: 0 0 20px #ff1744, 0 0 40px #ff1744;
        transform: translate(-50%, -50%) rotate(${angle * 180/Math.PI}deg);
        z-index: 12;
        animation: slowHeartBlast 6s ease-out forwards;
      `;
      heartsBg.appendChild(heart);
      setTimeout(() => heart.remove(), 6000);
    }
  }
  blastHearts();
  setInterval(() => { if(heartsRainActive) blastHearts(); }, 4000);
}

// REGULAR HEARTS
function createHearts() {
  const heartsBg = document.getElementById('heartsBg');
  setInterval(() => {
    const heart = document.createElement('div');
    heart.className = 'heart';
    heart.style.left = Math.random() * 100 + '%';
    heart.style.animationDuration = (Math.random() * 4 + 5) + 's';
    heartsBg.appendChild(heart);
    setTimeout(() => heart.remove(), 9000);
  }, 300);
}

// PASSWORD
function unlock() {
  const p = document.getElementById("pass").value.toLowerCase().trim();
  const error = document.getElementById("error");
  const secrets = ["iloveyou", "ilovebhumika", "bhumikaankush", "forever", "mylove"];
  
  if (secrets.includes(p)) {
    audioContext.resume();
    audio.play().catch(e => console.log('Music ready'));
    create3DHeartsSlowBlast();
    document.getElementById("lock").classList.add("hidden");
    document.getElementById("startScreen").classList.remove("hidden");
    error.textContent = "";
  } else {
    error.textContent = "‚ù§Ô∏è Whisper our special words... üíï";
    document.getElementById("pass").style.borderColor = "#ff6b9d";
    setTimeout(() => document.getElementById("pass").style.borderColor = "#ff4d6d", 500);
    document.getElementById("pass").value = "";
  }
}

// EVENTS
document.getElementById("startBtn").onclick = () => {
  document.getElementById("startScreen").classList.add("hidden");
  document.getElementById("content").classList.remove("hidden");
  createHearts();
};

document.getElementById("noBtn").onmouseover = () => {
  const btn = document.getElementById("noBtn");
  btn.style.position = 'fixed';
  btn.style.top = (Math.random() * 60 + 10) + "vh";
  btn.style.left = (Math.random() * 60 + 10) + "vw";
  btn.style.transform = `rotate(${Math.random() * 360}deg)`;
  btn.style.zIndex = '20';
};

// üî• PERFECT SEQUENCED TYPING (TOP ‚Üí BOTTOM ‚Üí LAST)
document.getElementById("yesBtn").onclick = () => {
  document.getElementById("content").classList.add("hidden");
  document.getElementById("final").classList.remove("hidden");
  
  // üåπ START PETALS
  createRosePetals();
  
  // 1. Thank You FIRST (TOP)
  setTimeout(() => {
    typeWriter(
      document.getElementById("thanksTyping"), 
      "Thank you, my forever love, for saying YES to our beautiful eternity together üíç‚ú®", 
      90,
      () => {
        // 2. Love Letter SECOND (MIDDLE)
        setTimeout(() => {
          typeWriter(
            document.getElementById("letterTyping"), 
            "My beautiful Bhumika, today you made me the happiest man alive. From this moment forward, every heartbeat, every breath, every dream will be for you. Together we'll create a lifetime of magical memories, endless laughter, and unbreakable love. You're my soulmate, my partner in every adventure, my forever home. üíç‚ú®", 
            75,
            () => {
              // 3. I Love You LAST (BOTTOM)
              setTimeout(() => {
                typeWriter(
                  document.getElementById("loveTyping"), 
                  "I love you Babe üíãüíãüíãüíãüíã", 
                  100
                );
              }, 800);
            }
          );
        }, 600);
      }
    );
  }, 300);
};

// FIREWORKS (unchanged)
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d", { alpha: true });
let particles = [], time = 0;
const MAX_PARTICLES = 2000;

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

function getPremiumRedFireworkColor() {
  const shades = ['#ff1744', '#ff4081', '#e91e63', '#f48fb1', '#ec407a', '#ff69b4', '#ff3366', '#ff1a4d', '#cc0f39', '#990d2e'];
  return shades[Math.floor(Math.random() * shades.length)];
}

function createHeartParticle(x, y) {
  const angle = Math.random() * Math.PI * 2;
  const speed = Math.random() * 10 + 3;
  particles.push({
    x, y, vx: Math.cos(angle) * speed * 0.8, vy: Math.sin(angle) * speed * 0.8,
    life: 180, decay: 0.008 + Math.random() * 0.005, size: 2.2 + Math.random() * 4,
    color: getPremiumRedFireworkColor(), isHeart: true
  });
}

function createFirework(x, y, count = 200) {
  for (let i = 0; i < count; i++) {
    if (particles.length < MAX_PARTICLES) {
      const angle = (i / count) * Math.PI * 2;
      const speed = 2 + Math.random() * 12;
      particles.push({
        x, y, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed - 1,
        life: 160, decay: 0.01 + Math.random() * 0.007, size: 2.5 + Math.random() * 5,
        color: getPremiumRedFireworkColor()
      });
    }
  }
}

function animate() {
  time++;
  requestAnimationFrame(animate);
  
  if (!audio.paused && particles.length < MAX_PARTICLES * 0.85) {
    analyser.getByteFrequencyData(dataArray);
    const avg = dataArray.reduce((a, b) => a + b) / bufferLength;
    if (avg > 0.2 * 255) {
      createFirework(Math.random() * canvas.width, canvas.height * 0.25, 220);
    }
  }
  
  ctx.fillStyle = "rgba(7, 0, 15, 0.15)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  while (particles.length > MAX_PARTICLES) particles.shift();
  
  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.x += (p.vx *= 0.987);
    p.y += (p.vy += 0.015);
    p.life -= p.decay;
    p.size *= 0.991;
    
    if (p.life > 0) {
      ctx.save();
      ctx.globalAlpha = Math.pow(p.life / 180, 2);
      ctx.shadowBlur = 25 + p.life * 0.2;
      ctx.shadowColor = p.color;
      ctx.translate(p.x, p.y);
      
      if (p.isHeart) {
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.bezierCurveTo(0, -p.size/4, -p.size/2, -p.size/2, 0, -p.size);
        ctx.bezierCurveTo(p.size/2, -p.size/2, 0, -p.size/4, 0, 0);
        ctx.lineTo(0, 0);
        ctx.closePath();
      } else {
        ctx.beginPath();
        ctx.arc(0, 0, p.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.shadowBlur = 12;
        ctx.beginPath();
        ctx.arc(0, 0, p.size * 0.4, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.shadowBlur = 0;
      ctx.fillStyle = p.color;
      ctx.fill();
      ctx.restore();
    } else {
      particles.splice(i, 1);
    }
  }
  
  if (document.getElementById("final").classList.contains("hidden") === false && particles.length < MAX_PARTICLES && Math.random() < 0.5) {
    createHeartParticle(Math.random() * canvas.width, canvas.height * 0.85);
  }
}

animate();
</script>
</body>
</html>
